<div class="w-full p-2 md:p-4 lg:w-3/4 mx-auto -mt-5">
  <form
    [formGroup]="streetDataFormGroup"
    (ngSubmit)="onSubmit()"
    class="rounded-lg bg-base-300 p-4 md:p-8 text-sm shadow-md backdrop-blur-md my-6"
  >
    <div class="flex justify-between items-center relative">
      <!---: Image URL -->
      <app-image-uploader
        label="Photo Preview"
        name="image_path"
        [viewOnly]="true"
        [formGroup]="streetDataFormGroup"
      >
      </app-image-uploader>

      <div
        [class]="
          utils.cn(
            'text-right md:text-left text-sm md:text-base flex flex-col justify-evenly items-end md:items-start absolute right-0 top-0 bottom-0 w-2/3 md:w-1/3'
          )
        "
      >
        <div>
          @if(isPermitted){
          <!---: Creator  -->
          <h2 class="font-semibold">By {{ creator }}</h2>
          }
          <h3 class="font-medium" *ngIf="isPermitted">{{ "@" + createdAt }}</h3>
          <h3 class="font-medium" *ngIf="!isPermitted">{{ createdAt }}</h3>
        </div>
        @if(isPermitted){
        <div class="font-medium">
          <app-input-field
            clx="my-2"
            label="Is Verified?"
            name="is_verified"
            type="checkbox"
            [formGroup]="streetDataFormGroup"
          ></app-input-field>
        </div>
        }
      </div>
    </div>
    @if(isPermitted){
    <!---: Property Unique Code -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Property Unique Code"
      name="unique_code"
      [formGroup]="streetDataFormGroup"
      [dataList]="uniqueCodeDataList"
    >
    </app-input-field>
    }

    <!---: Street Address -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Street Address"
      name="street_address"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Sector  -->
    @if(type === 'view') {

    <app-input-field
      clx="my-2"
      label="Sector"
      name="sector"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>
    } @else {
    <app-select-dropdown
      clx="my-2"
      label="Sector"
      name="sector"
      [items]="sectorOptions"
      [formGroup]="streetDataFormGroup"
      bindLabel="name"
      bindValue="id"
      (changeEvent)="onSectorChange($event)"
    >
    </app-select-dropdown>
    }

    <!---:Sub Sector  -->
    @if(type === 'view') {
    <app-input-field
      clx="my-2"
      label="Sub Sector"
      name="sub_sector"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>
    } @else {

    <app-select-dropdown
      clx="my-2"
      [label]="subSectorLabel"
      name="sub_sector"
      [items]="subSectorOptions"
      [formGroup]="streetDataFormGroup"
      bindLabel="name"
      bindValue="id"
      [pending]="subSectorPending"
      (changeEvent)="onSubSectorChange($event)"
    >
    </app-select-dropdown>
    }

    <!---: Location  -->
    <app-input-field
      clx="my-2"
      label="Location"
      name="location"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Section  -->
    @if(type === 'view') {
    <app-input-field
      clx="my-2"
      label="Section"
      name="section"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>
    } @else {

    <app-select-dropdown
      label="Section"
      name="section"
      [formGroup]="streetDataFormGroup"
      bindLabel="name"
      bindValue="id"
      notFoundText="Set a location first"
      [items]="sectionOptions"
      (changeEvent)="onSectionChange($event)"
    >
    </app-select-dropdown>
    }

    <!---: Number of Units  -->
    <app-input-field
      clx="my-2"
      label="Number of Units"
      name="number_of_units"
      [formGroup]="streetDataFormGroup"
      type="number"
    >
    </app-input-field>

    <!---: Construction Status -->
    @if(type === 'view') {
    <app-input-field
      clx="my-2"
      label="Construction Status"
      name="construction_status"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>
    } @else {

    <app-select-dropdown
      label="Construction Status"
      name="construction_status"
      [formGroup]="streetDataFormGroup"
      bindLabel="label"
      bindValue="value"
      [items]="constructionStatusOptions"
    >
    </app-select-dropdown>
    }

    <!---: Description -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Description"
      name="description"
      [formGroup]="streetDataFormGroup"
      type="textarea"
      [maxLength]="1000"
    ></app-input-field>

    <!---: Development Name -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Development Name"
      name="development_name"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Contact Name -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Contact Name"
      name="contact_name"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Contact Numbers -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      type="number-list"
      label="Contact Number(s)"
      name="contact_numbers"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Contact Email -->
    <app-input-field
      [withCounter]="true"
      clx="my-2"
      label="Contact Email"
      name="contact_email"
      type="email"
      [formGroup]="streetDataFormGroup"
    >
    </app-input-field>

    <!---: Google URL & Submit Button -->
    <div
      [class]="
        utils.cn('flex justify-between w-full items-baseline', {
          'justify-end': type === 'view'
        })
      "
    >
      @if(isPermitted){
      <!---: Google URL -->
      <div
        [class]="
          utils.cn('flex justify-end text-sm my-2 mt-4', {
            'mt-0': type === 'view'
          })
        "
      >
        <a
          *ngIf="geolocation"
          [attr.href]="geolocation"
          class="underline !text-sm md:text-base text-secondary"
        >
          Google Map URL
        </a>
        <span *ngIf="!geolocation" class="inline-flex items-center text-error">
          <my-mat-icon>warning</my-mat-icon> Geolocation not available
        </span>
      </div>
      } @if(type !== 'view'){

      <!---: Submit Button -->
      <app-form-submit-btn
        text="Save"
        [loading]="isImageLoading"
        [forDashboard]="true"
      >
      </app-form-submit-btn>
      }
    </div>
  </form>
</div>
